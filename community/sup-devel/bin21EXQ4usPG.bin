From b85798280484628b4ace525250a999d99e7bc480 Mon Sep 17 00:00:00 2001
From: Gaute Hope <eg@gaute.vetsj.com>
Date: Sun, 25 Sep 2011 15:50:03 +0200
Subject: [PATCH] Fix attachment off-by-one line selection in
 edit-message-mode

---
 lib/sup/modes/edit-message-mode.rb |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/lib/sup/modes/edit-message-mode.rb b/lib/sup/modes/edit-message-mode.rb
index 17ffadb..fb52990 100644
--- a/lib/sup/modes/edit-message-mode.rb
+++ b/lib/sup/modes/edit-message-mode.rb
@@ -282,7 +282,7 @@ EOS
   end
 
   def delete_attachment
-    i = curpos - @attachment_lines_offset - DECORATION_LINES - 1
+    i = curpos - @attachment_lines_offset - DECORATION_LINES - 2
     if i >= 0 && i < @attachments.size && BufferManager.ask_yes_or_no("Delete attachment #{@attachment_names[i]}?")
       @attachments.delete_at i
       @attachment_names.delete_at i
-- 
1.7.6.3

