<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;devel] editing messages outside of sup -->
<!--X-From-R13: Wpb Rbbearxnzc <fhcNmrii.ay> -->
<!--X-Date: Sun, 27 Feb 2011 07:32:22 &#45;0800 (PST) -->
<!--X-Message-Id: 1298819507&#45;sup&#45;8138@pruts.nl -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1298239068&#45;sup&#45;6985@whisper -->
<!--X-Reference: 1298747943&#45;sup&#45;9749@whisper -->
<!--X-Reference: 1298768518&#45;sup&#45;4041@alvh.no&#45;ip.org -->
<!--X-Reference: 1298774629&#45;sup&#45;4062@medusa -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-devel] editing messages outside of sup</title>
<link rev="made" href="mailto:sup@zevv.nl">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00433.html">Date Prev</a>][<a href="msg00474.html">Date Next</a>][<a href="msg00433.html">Thread Prev</a>][<a href="msg00540.html">Thread Next</a>][<a href="maillist.html#00585">Date Index</a>][<a href="threads.html#00585">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-devel] editing messages outside of sup</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Roni Choudhury &lt;<a href="mailto:roni%40cs.utah.edu">roni@cs.utah.edu</a>&gt;</li>
<li><em>Subject</em>: Re: [sup-devel] editing messages outside of sup</li>
<li><em>From</em>: Ico Doornekamp &lt;<a href="mailto:sup%40zevv.nl">sup@zevv.nl</a>&gt;</li>
<li><em>Date</em>: Sun, 27 Feb 2011 16:31:14 +0100</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a></li>
<li><em>Cc</em>: sup-devel &lt;<a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a></li>
<li><em>In-reply-to</em>: &lt;1298774629-sup-4062@medusa&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-devel">http://rubyforge.org/pipermail/sup-devel</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=help">mailto:sup-devel-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: Sup developer discussion &lt;sup-devel.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-devel@rubyforge.org">mailto:sup-devel@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-devel">http://rubyforge.org/mailman/listinfo/sup-devel</a>&gt;,	&lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=subscribe">mailto:sup-devel-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-devel">http://rubyforge.org/mailman/options/sup-devel</a>&gt;,	&lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=unsubscribe">mailto:sup-devel-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;1298239068-sup-6985@whisper&gt; &lt;1298747943-sup-9749@whisper&gt;	&lt;<a href="msg00538.html">1298768518-sup-4041@alvh.no-ip.org</a>&gt; &lt;1298774629-sup-4062@medusa&gt;</li>
<li><em>Reply-to</em>: Sup developer discussion &lt;<a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/git</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>* On Sun Feb 27 03:51:05 +0100 2011, Roni Choudhury wrote:
 
&gt; Excerpts from Alvaro Herrera's message of 2011-02-26 18:15:31 -0700:
&gt; &gt; Excerpts from Hamish's message of s&#xE1;b feb 26 16:23:13 -0300 2011:
&gt; &gt; &gt; Excerpts from Hamish's message of Sun Feb 20 22:02:54 +0000 2011:
&gt; &gt; &gt; &gt; For the moment this work is in the async_message_edit branch. If no one
&gt; &gt; &gt; &gt; shouts about this being a terrible idea then I'll merge it into next
&gt; &gt; &gt; &gt; within a week.
&gt; &gt; &gt; 
&gt; &gt; &gt; No one shouted, so I've merged it into next. At the end of the email is
&gt; &gt; &gt; the diff of the async_message_edit branch against where I started it.
&gt; 
&gt; Hamish, definitely thank you for doing something about this.  I
&gt; actually had a general question about this problem a while back - if
&gt; it is possible to edit the message independently via the approach you
&gt; took in this patch, why can't the editor be fired up in a
&gt; &quot;nonblocking&quot; kind of mode in the first place?  Something like a
&gt; fork()/exec() to start the editor, and then handling SIGCHLD rather
&gt; than calling a variant of wait() immediately.  The SIGCHLD handling
&gt; could check the return code from the editor, and then update the
&gt; message sending buffer appropriately.

But in what tty should the forked editor run then? I guess the above
idea would work for spawning an editor under X, but can not be used when
running on a (remote) console. I guess the 'vim --remote' solution would
be feasable, bug I guess this is not simple enough to add as an
out-of-the-box solution.

I guess one solution could be to add master/slave pty support to sup,
allowing one or more regular console based editors instances (vim, nano,
joe, etc) inside sup, passing all keyboard input to the slave process
except for a few (configurable) keystrokes for switching sup buffers.

(I'd make an exception for running emacs inside sup, because emacs users
would probably prefer running their own lisp version of sup inside emacs
instead of emacs in sup)

A quick proto would probably be not very hard to do, it is mostly a
matter of passing keyboard commands from the master sup to the editor
running in the slave pty, passing pty output back to the terminal and
handling the proper signals and ioctls() for keeping track of the window
size. This will work as long as all terminal control characters are
simple passed transparantly from the slave editor to the terminal, but
things quickly get nasty when you would want to do the terminal
emulation inside sup, and this is probably necessary for properly
handling screen redrawing and resizing.

It's hard to guess how much work this would really be. Part of me says
it should not be too hard to find a simple terminal emulation
implentation in another piece of (L)GPL software and simply steal as
much as possible. Another part of my fears one would likely end up
reimplementing at least half of GNU screen, which is probably not a very
pleasant adventure.

Ico

-- 
:wq
^X^Cy^K^X^C^C^C^C
_______________________________________________
Sup-devel mailing list
Sup-devel@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-devel">http://rubyforge.org/mailman/listinfo/sup-devel</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00540" href="msg00540.html">Re: [sup-devel] editing messages outside of sup</a></strong>
<ul><li><em>From:</em> Hamish &lt;dmishd@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00577" href="msg00577.html">[sup-devel] editing messages outside of sup</a></strong>
<ul><li><em>From:</em> Hamish &lt;dmishd@gmail.com&gt;</li></ul></li>
<li><strong><a name="00549" href="msg00549.html">Re: [sup-devel] editing messages outside of sup</a></strong>
<ul><li><em>From:</em> Hamish &lt;dmishd@gmail.com&gt;</li></ul></li>
<li><strong><a name="00538" href="msg00538.html">Re: [sup-devel] editing messages outside of sup</a></strong>
<ul><li><em>From:</em> Alvaro Herrera &lt;alvherre@alvh.no-ip.org&gt;</li></ul></li>
<li><strong><a name="00433" href="msg00433.html">Re: [sup-devel] editing messages outside of sup</a></strong>
<ul><li><em>From:</em> Roni Choudhury &lt;roni@cs.utah.edu&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00433.html">Re: [sup-devel] editing messages outside of sup</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00474.html">[sup-devel] [PATCH] Mark the thread as read after the	ThreadViewMode has been instancied and displayed</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00433.html">Re: [sup-devel] editing messages outside of sup</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00540.html">Re: [sup-devel] editing messages outside of sup</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00585"><strong>Date</strong></a></li>
<li><a href="threads.html#00585"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
