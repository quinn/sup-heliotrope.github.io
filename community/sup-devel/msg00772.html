<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;devel] Cannot query Japanese characters -->
<!--X-From-R13: Ivyyvnz [betna <jzbetna&#45;fhcNznfnawva.arg> -->
<!--X-Date: Wed, 4 May 2011 10:21:28 &#45;0700 (PDT) -->
<!--X-Message-Id: 1304527268&#45;sup&#45;7661@masanjin.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 201104251023.19659.hsanson@gmail.com -->
<!--X-Reference: 1303793294&#45;sup&#45;688@masanjin.net -->
<!--X-Reference: 1304052708&#45;sup&#45;4240@masanjin.net -->
<!--X-Reference: BANLkTim9PigP91LaDQ6UG2_prxncYv1zEA@mail.gmail.com -->
<!--X-Reference: BANLkTi=ObuZiHWGs7Mtvh8J5k4J3KTxgMA@mail.gmail.com -->
<!--X-Reference: BANLkTi=tSnbEijoEHG76Z5Fy9&#45;3G4TPxVw@mail.gmail.com -->
<!--X-Reference: 1304460745&#45;sup&#45;6241@masanjin.net -->
<!--X-Reference: BANLkTikbENFqT2GsE5uWjqN_DTMq43FFkw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-devel] Cannot query Japanese characters</title>
<link rev="made" href="mailto:wmorgan-sup@masanjin.net">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00711.html">Date Prev</a>][<a href="msg00624.html">Date Next</a>][<a href="msg00508.html">Thread Prev</a>][<a href="msg00624.html">Thread Next</a>][<a href="maillist.html#00772">Date Index</a>][<a href="threads.html#00772">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-devel] Cannot query Japanese characters</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-devel &lt;<a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: Re: [sup-devel] Cannot query Japanese characters</li>
<li><em>From</em>: William Morgan &lt;<a href="mailto:wmorgan-sup%40masanjin.net">wmorgan-sup@masanjin.net</a>&gt;</li>
<li><em>Date</em>: Wed, 04 May 2011 16:56:57 +0000</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a></li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a></li>
<li><em>In-reply-to</em>: &lt;<a href="msg00623.html">BANLkTikbENFqT2GsE5uWjqN_DTMq43FFkw@mail.gmail.com</a>&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-devel">http://rubyforge.org/pipermail/sup-devel</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=help">mailto:sup-devel-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: Sup developer discussion &lt;sup-devel.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-devel@rubyforge.org">mailto:sup-devel@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-devel">http://rubyforge.org/mailman/listinfo/sup-devel</a>&gt;,	&lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=subscribe">mailto:sup-devel-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-devel">http://rubyforge.org/mailman/options/sup-devel</a>&gt;,	&lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=unsubscribe">mailto:sup-devel-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg00765.html">201104251023.19659.hsanson@gmail.com</a>&gt;	&lt;<a href="msg00613.html">1303793294-sup-688@masanjin.net</a>&gt;	&lt;<a href="msg00546.html">1304052708-sup-4240@masanjin.net</a>&gt;	&lt;<a href="msg00515.html">BANLkTim9PigP91LaDQ6UG2_prxncYv1zEA@mail.gmail.com</a>&gt;	&lt;BANLkTi=ObuZiHWGs7Mtvh8J5k4J3KTxgMA@mail.gmail.com&gt;	&lt;BANLkTi=tSnbEijoEHG76Z5Fy9-3G4TPxVw@mail.gmail.com&gt;	&lt;<a href="msg00611.html">1304460745-sup-6241@masanjin.net</a>&gt;	&lt;<a href="msg00623.html">BANLkTikbENFqT2GsE5uWjqN_DTMq43FFkw@mail.gmail.com</a>&gt;</li>
<li><em>Reply-to</em>: Sup developer discussion &lt;<a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/git</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Horacio,

Thanks for all your help so far.

Reformatted excerpts from Horacio Sanson's message of 2011-05-04:
&gt; After some hacking I got a Heliotrope server that works perfectly with
&gt; Japanese text. All I did was follow your comments
&gt; and applied the MeCab tokenizer to the message body and query strings
&gt; before passing them to Whistelpig or more specific
&gt; to Heliotrope::Index.

Great!

&gt; There is one problem I don't see how to handle... I do receive email
&gt; in Japanese but also Chinese and Korean. I need a different
&gt; tokenizer for each one and I have no idea how to handle this. Do email
&gt; messages contain a language header that would allow me
&gt; to identify the language and pass it to the corresponding tokenizer??

There's not a great way to do this in email. You can look at the
content-type headers, which is sometimes present, and that will
sometimes give you a clue. But it's usually useless.

You can write some heuristics by hand, of course. Or you can try naive
bayes, which performs pretty well on this type of task. It looks like
someone just started a ruby project here: <a  rel="nofollow" href="https://github.com/fela/rlid">https://github.com/fela/rlid</a>.
It seems to only have Eurpoean languages so far, but you can probably
just dump in some CKJ text and retrain.

As for your patches: I've applied a related patch to fix the encoding
issue with Query#parsed_query_s. Can you let me know if that works?

Rather than sticking mecab directly in heliotrope, I am going to make a
hook for users to plug in their own custom tokenization code like you're
doing.
-- 
William &lt;wmorgan-sup@masanjin.net&gt;
_______________________________________________
Sup-devel mailing list
Sup-devel@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-devel">http://rubyforge.org/mailman/listinfo/sup-devel</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00624" href="msg00624.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> Horacio Sanson &lt;hsanson@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00765" href="msg00765.html">[sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> Horacio Sanson &lt;hsanson@gmail.com&gt;</li></ul></li>
<li><strong><a name="00613" href="msg00613.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> William Morgan &lt;wmorgan-sup@masanjin.net&gt;</li></ul></li>
<li><strong><a name="00546" href="msg00546.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> William Morgan &lt;wmorgan-sup@masanjin.net&gt;</li></ul></li>
<li><strong><a name="00515" href="msg00515.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> Horacio Sanson &lt;hsanson@gmail.com&gt;</li></ul></li>
<li><strong><a name="00746" href="msg00746.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> Horacio Sanson &lt;hsanson@gmail.com&gt;</li></ul></li>
<li><strong><a name="00747" href="msg00747.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> Horacio Sanson &lt;hsanson@gmail.com&gt;</li></ul></li>
<li><strong><a name="00611" href="msg00611.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> William Morgan &lt;wmorgan-sup@masanjin.net&gt;</li></ul></li>
<li><strong><a name="00623" href="msg00623.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
<ul><li><em>From:</em> Horacio Sanson &lt;hsanson@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00711.html">Re: [sup-devel] turnsole crash on start up</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00624.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00508.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00624.html">Re: [sup-devel] Cannot query Japanese characters</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00772"><strong>Date</strong></a></li>
<li><a href="threads.html#00772"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
