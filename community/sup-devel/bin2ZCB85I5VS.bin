From cdbe24aa7df7021b1a342cd742167583248f2792 Mon Sep 17 00:00:00 2001
From: Michael Stapelberg <michael@stapelberg.de>
Date: Tue, 29 Nov 2011 23:18:34 +0000
Subject: [PATCH] Require gpgme 1.0.8 (v2 breaks API)

---
 bin/sup           |    2 ++
 lib/sup/crypto.rb |    2 ++
 2 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/bin/sup b/bin/sup
index ad7a0d1..a1a88b6 100755
--- a/bin/sup
+++ b/bin/sup
@@ -12,6 +12,8 @@ end
 
 no_gpgme = false
 begin
+  # gpgme broke its API in 2.0, so make sure we have the old version for now.
+  gem 'gpgme', '=1.0.8'
   require 'gpgme'
 rescue LoadError
   no_gpgme = true
diff --git a/lib/sup/crypto.rb b/lib/sup/crypto.rb
index bc96f88..9452c73 100644
--- a/lib/sup/crypto.rb
+++ b/lib/sup/crypto.rb
@@ -1,4 +1,6 @@
 begin
+  # gpgme broke its API in 2.0, so make sure we have the old version for now.
+  gem 'gpgme', '=1.0.8'
   require 'gpgme'
 rescue LoadError
 end
-- 
1.7.5.4

