<!-- MHonArc v2.6.18 -->
<!--X-Subject: sup for 2.0 -->
<!--X-From-R13: Unhgr Vbcr <rtNtnhgr.irgfw.pbz> -->
<!--X-Date: Sat, 11 May 2013 03:39:32 &#45;0700 (PDT) -->
<!--X-Message-Id: 518E1F98.5070308@gaute.vetsj.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>sup for 2.0</title>
<link rev="made" href="mailto:eg@gaute.vetsj.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00206.html">Date Prev</a>][<a href="msg00317.html">Date Next</a>][<a href="msg00106.html">Thread Prev</a>][<a href="msg00302.html">Thread Next</a>][<a href="maillist.html#00405">Date Index</a>][<a href="threads.html#00405">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>sup for 2.0</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Sup developer discussion &lt;<a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: sup for 2.0</li>
<li><em>From</em>: Gaute Hope &lt;<a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a>&gt;</li>
<li><em>Date</em>: Sat, 11 May 2013 12:38:16 +0200</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130403 Thunderbird/17.0.5</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Greetings suppers,

I was thinking about setting up a branch for next generation sup, I have
partly switched to Mail (in stead of RMail) and started migrating to
using safe-ids in the index as opposed to the slightly modified
message-id and message-refs. I have put this in a sup-for-two branch
[1]. It is based on the discussion in issue 22 [2].

Anyway, my proposal is: we set up a sup-for-two branch on origin. The
things that should go in there are:
- maildir-sync
- Mail
- Id -&gt; safe id change
- other big changes we want for sup-0.14 or the future

The only mature feature here is the maildir-sync branch (which I have
also based my Mail work on). I still think that we should merge in the
Mail work pretty soon because the change of id to safeid (also for all
refs) will be extra work to port later - given that we move to Mail.
There are some issues and unfinished things still:
- performance (about half of RMail)
- only implemented for maildir, not for mbox or for sending
- haven't figured out all threading logic [3]
- migration script for index [4] is incomplete (and it might not even be
really possible)

Mail is UTF-8 (but crashes on too nasty input [5]), I've started to
collect nasty emails for testing purposes.. we should add those to the
test-suite somehow. So far most UTF-8 issues seems to have been solved
by [6] and native UTF-8 in Mail. Tested on some 25k of email of
extremely varying quality.

Comments are appreciated.

Regards, Gaute


[1] <a  rel="nofollow" href="https://github.com/gauteh/sup/tree/sup-for-two">https://github.com/gauteh/sup/tree/sup-for-two</a>
[2] <a  rel="nofollow" href="https://github.com/sup-heliotrope/sup/issues/22">https://github.com/sup-heliotrope/sup/issues/22</a>
[3] <a  rel="nofollow" href="https://github.com/gauteh/sup/blob/sup-for-two/lib/sup/thread.rb#L299">https://github.com/gauteh/sup/blob/sup-for-two/lib/sup/thread.rb#L299</a>
[4] <a  rel="nofollow" href="https://github.com/gauteh/sup/blob/sup-for-two/bin/sup-migrate-index">https://github.com/gauteh/sup/blob/sup-for-two/bin/sup-migrate-index</a>
[5] <a  rel="nofollow" href="https://github.com/mikel/mail/issues/544">https://github.com/mikel/mail/issues/544</a>
[6] <a  rel="nofollow" href="https://github.com/gauteh/sup/blob/sup-for-two/lib/sup/util.rb#L344">https://github.com/gauteh/sup/blob/sup-for-two/lib/sup/util.rb#L344</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00206.html">Re: [sup-devel] Experimental Gmail Source</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00317.html">Re: [sup-devel] Experimental Gmail Source</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00106.html">[sup-devel] How to get labels from sup for a specific message id?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00302.html">Release 0.13.0</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00405"><strong>Date</strong></a></li>
<li><a href="threads.html#00405"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
