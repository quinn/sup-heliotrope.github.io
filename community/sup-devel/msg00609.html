<!-- MHonArc v2.6.18 -->
<!--X-Subject: [sup&#45;devel] Need help applying patches -->
<!--X-From-R13: Vnzvfu <qzvfuqNtznvy.pbz> -->
<!--X-Date: Sun, 20 Feb 2011 11:45:26 &#45;0800 (PST) -->
<!--X-Message-Id: 1298228733&#45;sup&#45;6115@whisper -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Derived: binjZCw9s8XMI.bin -->
<!--X-Derived: bincc92K6PqE0.bin -->
<!--X-Derived: binO4TxznnHlt.bin -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[sup-devel] Need help applying patches</title>
<link rev="made" href="mailto:dmishd@gmail.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00564.html">Date Prev</a>][<a href="msg00761.html">Date Next</a>][<a href="msg00564.html">Thread Prev</a>][<a href="msg00761.html">Thread Next</a>][<a href="maillist.html#00609">Date Index</a>][<a href="threads.html#00609">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[sup-devel] Need help applying patches</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-devel &lt;<a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: [sup-devel] Need help applying patches</li>
<li><em>From</em>: Hamish &lt;<a href="mailto:dmishd%40gmail.com">dmishd@gmail.com</a>&gt;</li>
<li><em>Date</em>: Sun, 20 Feb 2011 19:19:17 +0000</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a>; dkim=neutral (body hash did not verify) header.i=@gmail.com</li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;	h=domainkey-signature:subject:from:to:date:message-id:user-agent	:content-transfer-encoding:mime-version:content-type;	bh=ejcKKXn+UN8FodVQ1FyXDvphsdpwtFKRckaUzLqN5qM=;	b=Eyq7vzFH3VdqSUIN15pGk45OQHWCEdu1WenNE8E5bsphI1rOXri8tV9/jjN3g2SSgz	NUO8XuYCjBcl81j3Dml7cIZ6QXBeoP+b4R7nvTnnhGTmXZIpSZWctkdrVmcmCX4lJMYS	MDCBzUC1cURmORIsI2dwGzTzCSZWplvKgl+X4=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;	h=subject:from:to:date:message-id:user-agent	:content-transfer-encoding:mime-version:content-type;	b=mhxbuVNVKkKjvLCmx2WLLZhFzj8cC4dikdZwnC1x8mK2iISjy8CPHApphTxgErS5wg	4+ti+cNUgfmq6MEDd7Ec1pUk0RLo+i44JOf4DIPYWrlSnAvKxBc/ws/GPnOI4Z10bpl6	XY1+Pbk3xjXcAR5WCjnC3i8lnlaRIuYL3WTMM=</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-devel">http://rubyforge.org/pipermail/sup-devel</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=help">mailto:sup-devel-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: Sup developer discussion &lt;sup-devel.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-devel@rubyforge.org">mailto:sup-devel@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-devel">http://rubyforge.org/mailman/listinfo/sup-devel</a>&gt;,	&lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=subscribe">mailto:sup-devel-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-devel">http://rubyforge.org/mailman/options/sup-devel</a>&gt;,	&lt;<a href="mailto:sup-devel-request@rubyforge.org?subject=unsubscribe">mailto:sup-devel-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>Reply-to</em>: Sup developer discussion &lt;<a href="mailto:sup-devel%40rubyforge.org">sup-devel@rubyforge.org</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-devel-bounces%40rubyforge.org">sup-devel-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/git</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Gaudenz has submitted a few useful patches which I want to commit to the
gpgme branch, but git apply seems to fail. I've forwarded the message
text below, and attached the patches. When I apply it gpgme, I get:


$ git apply --check --verbose ../patches2merge/0001-Unify-formatting-of-GPGME-error-messages.patch
Checking patch lib/sup/crypto.rb...
error: while searching for:
    begin
      sig = GPGME.detach_sign(format_payload(payload), gpg_opts)
    rescue GPGME::Error =&gt; exc
      info &quot;Error while running gpg: #{exc.message}&quot;
      raise Error, &quot;GPG command failed. See log for details.&quot;
    end

    envelope = RMail::Message.new

error: patch failed: lib/sup/crypto.rb:75
error: lib/sup/crypto.rb: patch does not apply


But I can't see why it could not find it. The code quoted above has
moved down by 31 lines, but is otherwise unchanged, but I thought git
could cope with that :/

I tried hand-editing the patch to change the line numbers, but I still
get the same error. Am I missing a trick? I've checked the file formats
and both have unix-style line endings.

I have tried and I can apply these patches by hand, but then they will
appear as committed by me, rather than giving Gaudenz his due.

Do others have the same problem? You could try by checking out the gpgme
branch and trying git apply.

I've also tried git am on a directory with these 3 attachments in:


$ git am -s ../patches2merge/
Nothing to do.


Not very helpful. Any help appreciated.

Hamish Downer


PS I am using git 1.7.1 on Ubuntu 10.10 x86_64 


--- Begin forwarded message from Gaudenz Steinlin ---
From: Gaudenz Steinlin &lt;gaudenz@soziologie.ch&gt;
To: sup-devel &lt;sup-devel@rubyforge.org&gt;
Date: Thu, 17 Feb 2011 14:49:01 +0000
Subject: [sup-devel] GPGME fixes

Hi

While reimporting all my messages I encountered a few problemes with
the GPGME code. Please consider the attached fixes.

The second patch depends on the first (error message unification). But
if you don't like the first I can easily produce a standalone version.

Gaudenz

--- End forwarded message ---
</pre><p><strong>Attachment:
<a href="binjZCw9s8XMI.bin" ><tt>0003-Check-for-valid-signature-before-signature.to_s.patch</tt></a></strong><br>
<em>Description:</em> Binary data</p>
<p><strong>Attachment:
<a href="bincc92K6PqE0.bin" ><tt>0002-Check-for-ArgumentError-on-signature-verification.patch</tt></a></strong><br>
<em>Description:</em> Binary data</p>
<p><strong>Attachment:
<a href="binO4TxznnHlt.bin" ><tt>0001-Unify-formatting-of-GPGME-error-messages.patch</tt></a></strong><br>
<em>Description:</em> Binary data</p>
<pre>_______________________________________________
Sup-devel mailing list
Sup-devel@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-devel">http://rubyforge.org/mailman/listinfo/sup-devel</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00761" href="msg00761.html">Re: [sup-devel] Need help applying patches</a></strong>
<ul><li><em>From:</em> Hamish &lt;dmishd@gmail.com&gt;</li></ul></li>
<li><strong><a name="00439" href="msg00439.html">Re: [sup-devel] Need help applying patches</a></strong>
<ul><li><em>From:</em> Michael Hamann &lt;michael@content-space.de&gt;</li></ul></li>
<li><strong><a name="00657" href="msg00657.html">Re: [sup-devel] Need help applying patches</a></strong>
<ul><li><em>From:</em> William Morgan &lt;wmorgan-sup@masanjin.net&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00564.html">Re: [sup-devel] GPGME fixes</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00761.html">Re: [sup-devel] Need help applying patches</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00564.html">Re: [sup-devel] GPGME fixes</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00761.html">Re: [sup-devel] Need help applying patches</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00609"><strong>Date</strong></a></li>
<li><a href="threads.html#00609"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
