<!-- MHonArc v2.6.18 -->
<!--X-Subject: [sup&#45;talk] Sup + offlineimap + Gmail -->
<!--X-From-R13: Tybevna Gatynho <s.hatynhoNtbbtyrznvy.pbz> -->
<!--X-Date: Wed, 18 May 2011 00:44:51 &#45;0700 (PDT) -->
<!--X-Message-Id: 1305704218&#45;sup&#45;213@btmwxn -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[sup-talk] Sup + offlineimap + Gmail</title>
<link rev="made" href="mailto:f.unglaub@googlemail.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00114.html">Date Prev</a>][<a href="msg00088.html">Date Next</a>][<a href="msg00114.html">Thread Prev</a>][<a href="msg00088.html">Thread Next</a>][<a href="maillist.html#00327">Date Index</a>][<a href="threads.html#00327">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[sup-talk] Sup + offlineimap + Gmail</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: [sup-talk] Sup + offlineimap + Gmail</li>
<li><em>From</em>: Florian Unglaub &lt;<a href="mailto:f.unglaub%40googlemail.com">f.unglaub@googlemail.com</a>&gt;</li>
<li><em>Date</em>: Wed, 18 May 2011 09:44:25 +0200</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a>; dkim=neutral (body hash did not verify) header.i=@googlemail.com</li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;	d=googlemail.com; s=gamma;	h=domainkey-signature:content-type:from:to:subject:date:message-id	:user-agent:content-transfer-encoding;	bh=bkV50mQyG2VDvJERaPwC19m2eKwY4ArxfWjfGgAvF8Q=;	b=FF0ZuHqDOneAVjxY8sr7XTYx1hBIQgOuXNXjlmJyB0fWsgODRkNc9ERdFurMA5NvAf	VbeWNOmJrHOiVqwkBu6RKMuGX3CvkRBY8jyiL0sjfPJBUGcTM2KnkjaAWPUXTU9KRrQQ	5M6qTQkeSd5/ouEicQKX0L/nG1cgvwypKieDM=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws; d=googlemail.com; s=gamma;	h=content-type:from:to:subject:date:message-id:user-agent	:content-transfer-encoding;	b=BCZU/blE8j6kB4tPXHof+aNC1yAYx/uMe9Qn2XiqCXH8iG91J+7BXa+qt8wUMeOrOM	1uxDCMoypA2JTsblyhLILSF2MPAhjRzGsd07XbHaoiaXcNvxNmSpTX3i1+ZV0tIlgVpW	Al9lQbI21xgcm4KH+jVaLE/B9d1mMMYYlpqBI=</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/0.12.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hey guys,

I approaching an almost ideal setup for a good gmail integration into
sup using offlineimap. My offlineimap setup pulls all Gmail folders
(aka Gmail labels) into seperate maildirs. I found a nice startup-hook
for sup to add sources dynamicly:

Dir[ENV['HOME']+'/.maildir/gmail/*'].map do |d|
  uri = &quot;maildir:&quot;+d
  log &quot;Processing source #{uri}&quot;
  unless SourceManager.source_for uri
    source = Maildir.new uri, true, false, nil, [LabelManager.label_for(File.basename(d))]
    SourceManager.add_source source 
    log &quot;Added source #{d}&quot;
  end
end

This snippet of code checks for any directories in
$HOME/.maildir/gmail and adds them as a new source with the
corresponding label. This allows me to make changes in the gmail
web interface which will be reflected in sup.

Now there's a small issue I encountered today. If I star a message in
Sup, offlineimap claims that it adds the 'S' flag to that message, but
this won't be synced to Gmail for some reason. The other direction
(star it on my mobile phone or in the web interface) works fine,
i.e. the message can be seen in the 'Starred' label in sup.

Is there any way to make this work?

Regards,
Florian
_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00088" href="msg00088.html">Re: [sup-talk] Sup + offlineimap + Gmail</a></strong>
<ul><li><em>From:</em> Damien Leone &lt;damien.leone@fensalir.fr&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00114.html">[sup-talk] Multiple documents for a single docid in Xapian?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00088.html">Re: [sup-talk] Sup + offlineimap + Gmail</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00114.html">[sup-talk] Multiple documents for a single docid in Xapian?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00088.html">Re: [sup-talk] Sup + offlineimap + Gmail</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00327"><strong>Date</strong></a></li>
<li><a href="threads.html#00327"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
