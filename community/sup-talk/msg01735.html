<!-- MHonArc v2.6.18 -->
<!--X-Subject: [sup&#45;talk] as asked &#45;&#45; little bug report -->
<!--X-From-R13: Knebfyni Vnypuraxb <yvfgfNbarehffvna.pbz> -->
<!--X-Date: Mon, 19 Oct 2009 10:01:31 &#45;0700 (PDT) -->
<!--X-Message-Id: 20091019170119.GM17964@onerussian.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[sup-talk] as asked -- little bug report</title>
<link rev="made" href="mailto:lists@onerussian.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg01564.html">Date Prev</a>][<a href="msg01752.html">Date Next</a>][<a href="msg01485.html">Thread Prev</a>][<a href="msg01752.html">Thread Next</a>][<a href="maillist.html#01735">Date Index</a>][<a href="threads.html#01735">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[sup-talk] as asked -- little bug report</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>Subject</em>: [sup-talk] as asked -- little bug report</li>
<li><em>From</em>: Yaroslav Halchenko &lt;<a href="mailto:lists%40onerussian.com">lists@onerussian.com</a>&gt;</li>
<li><em>Date</em>: Mon, 19 Oct 2009 13:01:19 -0400</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Mutt/1.5.20 (2009-06-14)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Sup,

thanks for sup!

I have been with (mutt+mairix)-in-screen guy for a while, now I am
considering sup -- it seems quite nice, although it took days to import
my inbox (26k messages) without yet touching any lists in the
other folders (where I am going to assign some tags on import whenever I
get more familiar with sup).

One of the side-effects was: since I was not &quot;processing&quot; fetched emails
while they were fetched by sup, inbox listing was growing and growing
until UI became barely responsive and I guess good chunk of CPU time was
taken to handle just UI.  So, it might be desirable to have
automatic way to 'hide' older messages in the listing whenever more and
more new ones come in?

FWIW some of the issues I hit:

1. At first I was running released version shipped with Debian sid
(0.8.1-1), and while I was watching a thread and decided to
archive and jump to next I pressed sequence &quot;,a&quot; and then sup crashed
entirely with:

--- NoMethodError from thread: main
undefined method `mark_dirty' for nil:NilClass
/usr/lib/ruby/1.8/sup/modes/line-cursor-mode.rb:55:in `set_cursor_pos'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:148:in `launch_another_thread'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:131:in `launch_next_thread_after'
/usr/lib/ruby/1.8/sup/modes/thread-view-mode.rb:473:in `dispatch'
/usr/lib/ruby/1.8/sup/modes/thread-view-mode.rb:431:in `archive_and_then'
/usr/lib/ruby/1.8/sup/modes/thread-view-mode.rb:418:in `archive_and_next'
/usr/lib/ruby/1.8/sup/mode.rb:50:in `send'
/usr/lib/ruby/1.8/sup/mode.rb:50:in `handle_input'
/usr/lib/ruby/1.8/sup/buffer.rb:249:in `handle_input'
/usr/bin/sup-mail:236

2. further I was hit with another one (see below) for which I think I found a fix
1dbe8fe8b2a57803d697739b4a585e72b1f91885
which seems relevant
<a  rel="nofollow" href="http://gitorious.org/sup/ehabkost-hacks/commit/1dbe8fe8b2a57803d697739b4a585e72b1f91885">http://gitorious.org/sup/ehabkost-hacks/commit/1dbe8fe8b2a57803d697739b4a585e72b1f91885</a>
but it never was absorbed in mainline


Here is actual traceback

--- NoMethodError from thread: poll after loading inbox
undefined method `content_width' for nil:NilClass
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:866:in `from_width'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:792:in `text_for_thread_at'
/usr/lib/ruby/1.8/sup/hook.rb:134:in `each_with_index'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:791:in `each'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:791:in `each_with_index'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:791:in `text_for_thread_at'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:752:in `regen_text'
/usr/lib/ruby/1.8/sup/util.rb:354:in `map_with_index'
/usr/lib/ruby/1.8/sup/hook.rb:134:in `each_with_index'
/usr/lib/ruby/1.8/sup/util.rb:354:in `each'
/usr/lib/ruby/1.8/sup/util.rb:354:in `each_with_index'
/usr/lib/ruby/1.8/sup/util.rb:354:in `map_with_index'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:752:in `regen_text'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:228:in `update'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:696:in `add_or_unhide'
/usr/lib/ruby/1.8/sup/modes/thread-index-mode.rb:186:in `handle_added_update'
/usr/lib/ruby/1.8/sup/update.rb:27:in `send'
/usr/lib/ruby/1.8/sup/update.rb:27:in `relay'
/usr/lib/ruby/1.8/sup/update.rb:27:in `each'
/usr/lib/ruby/1.8/sup/update.rb:27:in `relay'
/usr/lib/ruby/1.8/sup/util.rb:513:in `send'
/usr/lib/ruby/1.8/sup/util.rb:513:in `method_missing'
/usr/lib/ruby/1.8/sup/poll.rb:162:in `add_messages_from'
/usr/lib/ruby/1.8/sup/maildir.rb:130:in `each'
/usr/lib/ruby/1.8/sup/maildir.rb:127:in `upto'
/usr/lib/ruby/1.8/sup/maildir.rb:127:in `each'
/usr/lib/ruby/1.8/sup/util.rb:552:in `send'
/usr/lib/ruby/1.8/sup/util.rb:552:in `__pass'
/usr/lib/ruby/1.8/sup/util.rb:539:in `method_missing'
/usr/lib/ruby/1.8/sup/poll.rb:141:in `add_messages_from'
/usr/lib/ruby/1.8/sup/poll.rb:98:in `do_poll'
/usr/lib/ruby/1.8/sup/poll.rb:86:in `each'
/usr/lib/ruby/1.8/sup/poll.rb:86:in `do_poll'
/usr/lib/ruby/1.8/sup/poll.rb:85:in `synchronize'
/usr/lib/ruby/1.8/sup/poll.rb:85:in `do_poll'
/usr/lib/ruby/1.8/sup/util.rb:513:in `send'
/usr/lib/ruby/1.8/sup/util.rb:513:in `method_missing'
/usr/lib/ruby/1.8/sup/modes/poll-mode.rb:17:in `poll'
/usr/lib/ruby/1.8/sup/poll.rb:53:in `poll'
/usr/lib/ruby/1.8/sup/util.rb:513:in `send'
/usr/lib/ruby/1.8/sup/util.rb:513:in `method_missing'
/usr/bin/sup-mail:204


3. btw -- I wonder why git repository has no actual tags but just &quot;like
converted from svn&quot; off-branches for each release?  is that a feature or
a bug (like forgotten --tags upon push ;))

4. in general -- should I follow the crash message and complain here or just
report bugs within Debian using reportbug?

5. Since for me released sup had too many corner stones to run reliably
I've decided to run from git.  Looking at the git history, it looked like
I should stick to the 'next' branch. Is that correct?

6. In code from next branch (09e6a71e232d2d3352fe45b13789c3441e3ac937) which I
run with &quot;ruby -I lib -w bin/sup&quot; (sorry if there is a better way I didn't
find, this is my first ever experience with Ruby-based project), I hit
some new issues:

 * periodically some warnings are dumped to stderr which obscures current UI

  rendering... ie warnings like
   /usr/lib/ruby/1.8/time.rb:180: warning: 2 digits year is used

  imho they should go to the same log, shouldn't they?
 
 * some &quot;elderly&quot; crash where I don't remember the context which caused
   it

 unknown drawable object: nil in
 #&lt;Redwood::LabelListMode:0x7f9272cadfa8&gt; for line 3
 ./lib/sup/modes/scroll-mode.rb:200:in `draw_line'
 ./lib/sup/modes/line-cursor-mode.rb:52:in `draw_line'
 ./lib/sup/modes/line-cursor-mode.rb:120:in `cursor_up'
 ./lib/sup/mode.rb:51:in `send'
 ./lib/sup/mode.rb:51:in `handle_input'
 ./lib/sup/buffer.rb:267:in `handle_input'
 bin/sup:245


 * Now that I've fetched big bulk of emails into inbox... I wonder if
   there is a logical way to archive all threads BUT not starred ones?

thanks in advance for any reply ;)
-- 
Yaroslav O. Halchenko
Postdoctoral Fellow,   Department of Psychological and Brain Sciences
Dartmouth College, 419 Moore Hall, Hinman Box 6207, Hanover, NH 03755
Phone: +1 (603) 646-9834                       Fax: +1 (603) 646-1419
WWW:   <a  rel="nofollow" href="http://www.linkedin.com/in/yarik">http://www.linkedin.com/in/yarik</a>        
_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01564.html">Re: [sup-talk] Arch Linux Sup Package (Ruby 1.9.1 + Sup 0.9)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01752.html">[sup-talk] [PATCH] detect and set charset on text/* attachments</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01485.html">Re: [sup-talk] Arch Linux Sup Package (Ruby 1.9.1 + Sup 0.9)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01752.html">[sup-talk] [PATCH] detect and set charset on text/* attachments</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01735"><strong>Date</strong></a></li>
<li><a href="threads.html#01735"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
