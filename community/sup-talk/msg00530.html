<!-- MHonArc v2.6.18 -->
<!--X-Subject: [sup&#45;talk] crypto&#45;mode hook fragment to sign if from address can be	signed -->
<!--X-From-R13: [nep Vnegfgrva <znep.unegfgrvaNnyhz.inffne.rqh> -->
<!--X-Date: Sat, 29 Jan 2011 09:46:28 &#45;0800 (PST) -->
<!--X-Message-Id: 1296322007&#45;sup&#45;3060@cabinet -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Derived: pgpGj0CISz_Xv.pgp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[sup-talk] crypto-mode hook fragment to sign if from address can be	signed</title>
<link rev="made" href="mailto:marc.hartstein@alum.vassar.edu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00546.html">Date Prev</a>][<a href="msg00438.html">Date Next</a>][<a href="msg00595.html">Thread Prev</a>][<a href="msg00420.html">Thread Next</a>][<a href="maillist.html#00530">Date Index</a>][<a href="threads.html#00530">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[sup-talk] crypto-mode hook fragment to sign if from address can be	signed</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: [sup-talk] crypto-mode hook fragment to sign if from address can be	signed</li>
<li><em>From</em>: Marc Hartstein &lt;<a href="mailto:marc.hartstein%40alum.vassar.edu">marc.hartstein@alum.vassar.edu</a>&gt;</li>
<li><em>Date</em>: Sat, 29 Jan 2011 12:31:07 -0500</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a>; dkim=neutral (body hash did not verify) header.i=@gmail.com</li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;	h=domainkey-signature:sender:subject:from:to:date:message-id	:user-agent:content-transfer-encoding:mime-version:content-type;	bh=GepFrWQ83Vfw+dO6gB5ETATFj0mPh5/hOGdpRIBF0Pc=;	b=KpQjJdrH7631UAq1G6dvPcWp0vOkuogTTFCyl9Y/bhL5mfY6JQNIEYt9A6a2//Fc9E	YA+SvDq7lTy2WHZEfBzQGo/30YLf3rVANRZdZLyIYvK2WAcP7J3MIw2raclNTU1RZlPo	6z0qBWUCSXtp1g2Z4HRvKJu8V0hHU4isAQBI8=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;	h=sender:subject:from:to:date:message-id:user-agent	:content-transfer-encoding:mime-version:content-type;	b=MN2OQK8uIX/EnjuAU+86noEM1F1HyI0e2uE+MvQHcfQYyy1XPSFmNpqmZeW4xX21pa	uPT1HuXnc9BbUGKBmSrPilEC+bjnNBHBfv2Smx+fr9t+/8PcG9B2G0rW8fURpV3aXpmL	BmYuaZnUSxGQVlcOihtnsRefmw/a2gNxctT98=</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/git</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>I wrote this crypto-mode hook fragment so sup will default to Sign when
it has selected a from address for the outgoing email for which I have a
key which can sign emails. I have an occasionally used address for
outgoing mail which is not associated with my private key and which only
posts to a mailing list which complains about signed email anyway, so
this makes my life easier.

Posted to share if anybody else finds it useful, and also to solicit
suggestions for improvements. It works as-is, but I'm neither a Ruby nor
GPG expert and wouldn't be surprised to learn there's a better way.

======================================================================
sign_addresses = `gpg -K`.grep(/&lt;(.*)&gt;/){$1}
crypto_selector.set_to :sign if not sign_addresses.select{|a| header[&quot;From&quot;].include?(a) }.empty?
</pre><p><strong>Attachment:
<a href="pgpGj0CISz_Xv.pgp" ><tt>signature.asc</tt></a></strong><br>
<em>Description:</em> PGP signature</p>
<pre>_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00420" href="msg00420.html">Re: [sup-talk] crypto-mode hook fragment to sign if from address	can be signed</a></strong>
<ul><li><em>From:</em> Tero Tilus &lt;tero@tilus.net&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00546.html">[sup-talk] illegible encoding when exiting vim</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00438.html">[sup-talk]  Adding Sources</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00595.html">Re: [sup-talk] illegible encoding when exiting vim</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00420.html">Re: [sup-talk] crypto-mode hook fragment to sign if from address	can be signed</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00530"><strong>Date</strong></a></li>
<li><a href="threads.html#00530"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
