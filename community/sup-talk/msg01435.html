<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;talk] PGP INLINE &#45; can't make it work -->
<!--X-From-R13: cvbge.xrzcnNjc.rh -->
<!--X-Date: Mon, 8 Mar 2010 02:30:26 &#45;0800 (PST) -->
<!--X-Message-Id: 201003081129.47648.piotr.kempa@wp.eu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 201002261808.36354.kosmici&#45;atakuja@wp.pl -->
<!--X-Reference: 201003021519.23488.piotr.kempa@wp.eu -->
<!--X-Reference: 201003081118.55543.piotr.kempa@wp.eu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-talk] PGP INLINE - can't make it work</title>
<link rev="made" href="mailto:piotr.kempa@wp.eu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg01405.html">Date Prev</a>][<a href="msg01420.html">Date Next</a>][<a href="msg01405.html">Thread Prev</a>][<a href="msg01420.html">Thread Next</a>][<a href="maillist.html#01435">Date Index</a>][<a href="threads.html#01435">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-talk] PGP INLINE - can't make it work</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>Subject</em>: Re: [sup-talk] PGP INLINE - can't make it work</li>
<li><em>From</em>: <a href="mailto:piotr.kempa%40wp.eu">piotr.kempa@wp.eu</a></li>
<li><em>Date</em>: Mon, 8 Mar 2010 11:29:47 +0100</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>In-reply-to</em>: &lt;<a href="msg01405.html">201003081118.55543.piotr.kempa@wp.eu</a>&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg01177.html">201002261808.36354.kosmici-atakuja@wp.pl</a>&gt;	&lt;<a href="msg01119.html">201003021519.23488.piotr.kempa@wp.eu</a>&gt;	&lt;<a href="msg01405.html">201003081118.55543.piotr.kempa@wp.eu</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: KMail/1.13.1 (Linux/2.6.32-ck; KDE/4.4.1; x86_64; ; )</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

On Monday 08 March 2010 11:18:55 piotr.kempa@wp.eu wrote:
&gt; On Tuesday 02 March 2010 15:19:23 piotr.kempa@wp.eu wrote:
&gt; &gt; Sounds cool, I can't wait then. Let's hope the patch is included in 0.11. 
&gt; &gt; Thanks Michael!
&gt; &gt; Piotr
&gt; &gt; 
&gt; &gt; On Tuesday 02 March 2010 14:59:19 Michael Stapelberg wrote:
&gt; &gt; &gt; Hi Piotr,
&gt; &gt; &gt; 
&gt; &gt; &gt; Excerpts from piotr.kempa's message of Di M&#xE4;r 02 11:49:59 +0100 2010:
&gt; &gt; &gt; &gt; So, I guess if this functionality is to be included in sup (and I 
think 
&gt; it 
&gt; &gt; &gt; &gt; doesn't have to be since enigmail just makes broken messages and 
there's 
&gt; &gt; no 
&gt; &gt; &gt; &gt; reason why anybody should put up with that:) it should not be in 
&gt; crypto.rb 
&gt; &gt; but 
&gt; &gt; &gt; &gt; somewhere else, where the decision is made to even use functions from 
&gt; &gt; &gt; &gt; crypto.rb (like decrypt) on a message. I'm no programmer but I guess 
it 
&gt; &gt; should 
&gt; &gt; &gt; As mentioned, I wrote a patch to do this. It is currently in review and 
&gt; will
&gt; &gt; &gt; hopefully be included soon.
&gt; &gt; &gt; 
&gt; 
&gt; Can anyone confirm if this patch made it to 0.11? I just installed the new 
&gt; version and it still doesn't work but if it's there then maybe I'm doing 
&gt; something wrong. If it didn't, is it posted anywhere? I'll be happy to patch 
&gt; 0.11 myself instead of waiting for the next version. I really, really want 
to 
&gt; start using sup :)
&gt; 
&gt; Thank you, 
&gt; Piotr
&gt; 
Okay, I found the patch here: <a  rel="nofollow" href="http://www.mail-archive.com/sup-">http://www.mail-archive.com/sup-</a>
talk@rubyforge.org/msg02770.html

And it is included in 0.11, I just checked in the code. 

However, this still doesn't work because the header doesn't contain Content 
Type = application/pgp, it is text/plain, which is absolutely crazy and I have 
no idea what the enigmail developers are thinking... Anyway, here's how it 
looks like (only the important part):

X-Enigmail-Version: 0.95.7
Content-Type: text/plain;
  charset=UTF-8
Content-Transfer-Encoding: quoted-printable

-----BEGIN PGP MESSAGE-----
Charset: UTF-8
Version: GnuPG v1.4.9 (MingW32)
Comment: Using GnuPG with Mozilla - <a  rel="nofollow" href="http://enigmail.mozdev.org">http://enigmail.mozdev.org</a>
=20
hQIOA3WKxDKSmLd7EAf9GP5JLA77IcGOAUrOZ8fGCEtK8Pm838Me+pMD94ulHlDS
LcidQKPSVGXaj4lLU8RqxoMKTpxuaZAm1u286C+SL9eQc51N3gH/X57loKhjCRb+
[...]

So in order to decide about encrypted content you actually have to look inside 
the body of the message, not just at the header. At least I couldn't find any 
indication in the headers :(

All in all, I wouldn't be surprised if you decided not to support such broken 
emails so I'll just go about learning enough ruby to patch it myself :)

Piotr
_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01420" href="msg01420.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
<ul><li><em>From:</em> Michael Stapelberg &lt;michael+sup@stapelberg.de&gt;</li></ul></li>
<li><strong><a name="01241" href="msg01241.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
<ul><li><em>From:</em> Sven Moritz Hallberg &lt;sm@khjk.org&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01177" href="msg01177.html">[sup-talk] PGP INLINE - can't make it work</a></strong>
<ul><li><em>From:</em> kosmici-atakuja@wp.pl</li></ul></li>
<li><strong><a name="01119" href="msg01119.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
<ul><li><em>From:</em> piotr.kempa@wp.eu</li></ul></li>
<li><strong><a name="01405" href="msg01405.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
<ul><li><em>From:</em> piotr.kempa@wp.eu</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01405.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01420.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01405.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01420.html">Re: [sup-talk] PGP INLINE - can't make it work</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01435"><strong>Date</strong></a></li>
<li><a href="threads.html#01435"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
