<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;talk] Slow opening of threads? -->
<!--X-From-R13: Enfpun Evyor <fnfpun&#45;zy&#45;ercyl&#45;gb&#45;2010&#45;3Nfvyor.bet> -->
<!--X-Date: Fri, 22 Oct 2010 11:16:18 &#45;0700 (PDT) -->
<!--X-Message-Id: 1287766308&#45;sup&#45;224@twin.sascha.silbe.org -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 1287739347&#45;sup&#45;2987@blake -->
<!--X-Derived: pgpTRj0RhLy3e.pgp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-talk] Slow opening of threads?</title>
<link rev="made" href="mailto:sascha-ml-reply-to-2010-3@silbe.org">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00774.html">Date Prev</a>][<a href="msg00907.html">Date Next</a>][<a href="msg00774.html">Thread Prev</a>][<a href="msg00834.html">Thread Next</a>][<a href="maillist.html#01072">Date Index</a>][<a href="threads.html#01072">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-talk] Slow opening of threads?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: Re: [sup-talk] Slow opening of threads?</li>
<li><em>From</em>: Sascha Silbe &lt;<a href="mailto:sascha-ml-reply-to-2010-3%40silbe.org">sascha-ml-reply-to-2010-3@silbe.org</a>&gt;</li>
<li><em>Date</em>: Fri, 22 Oct 2010 19:19:39 +0200</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>In-reply-to</em>: &lt;1287739347-sup-2987@blake&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>Mail-followup-to</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>References</em>: &lt;1287739347-sup-2987@blake&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/git</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Excerpts from Shadowfirebird's message of Fri Oct 22 11:23:42 +0200 2010:

&gt; Is it me, or is Sup sometimes very slow at opening a thread?  I mean: a couple of minutes to open a thread with two or three messages and no attachments, about one time in three?

My experience is that 
a) thread opening time is proportional to cumulated message size and
b) time for collapsing/expanding a message is proportional to the number
   of (expanded) lines in the buffer.

In both cases there's a large factor involved.

Are you getting different timings for the same thread (remember to flush
all OS level caches to check this) or are some threads always slow?
Does it happen in conjunction with polling? I noticed that sup doesn't
always display &quot;Flushing index...&quot; right away (maybe it doesn't flush
the output buffer when displaying the message?).


FWIW, notmuch is not much faster (SCNR) on my systems. Sup is
alternating between IO bound and CPU bound; notmuch kind of eliminates
the CPU bound part, but because it doesn't support mbox the IO bound
part increases significantly. I imagine that notmuch would benefit
greatly from an SSD.

Sascha

--
<a  rel="nofollow" href="http://sascha.silbe.org/">http://sascha.silbe.org/</a>
<a  rel="nofollow" href="http://www.infra-silbe.de/">http://www.infra-silbe.de/</a>
</pre><p><strong>Attachment:
<a href="pgpTRj0RhLy3e.pgp" ><tt>signature.asc</tt></a></strong><br>
<em>Description:</em> PGP signature</p>
<pre>_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00834" href="msg00834.html">Re: [sup-talk] Slow opening of threads?</a></strong>
<ul><li><em>From:</em> Shadowfirebird &lt;shadowfirebird@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01050" href="msg01050.html">[sup-talk] Slow opening of threads?</a></strong>
<ul><li><em>From:</em> Shadowfirebird &lt;shadowfirebird@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00774.html">Re: [sup-talk] Slow opening of threads?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00907.html">Re: [sup-talk] Slow opening of threads?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00774.html">Re: [sup-talk] Slow opening of threads?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00834.html">Re: [sup-talk] Slow opening of threads?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01072"><strong>Date</strong></a></li>
<li><a href="threads.html#01072"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
