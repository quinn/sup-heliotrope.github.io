<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;talk] sent mail -->
<!--X-From-R13: Dvpuneq Vrlpbpx <etuNgbcvxnyvgl.pbz> -->
<!--X-Date: Thu, 8 Apr 2010 06:27:39 &#45;0700 (PDT) -->
<!--X-Message-Id: 1270731588&#45;sup&#45;6397@roughage.com.au -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: alpine.DEB.1.10.1004072122250.25589@stewart.warwick.ac.uk -->
<!--X-Reference: 1270727373&#45;sup&#45;8902@roughage.com.au -->
<!--X-Reference: alpine.DEB.1.10.1004081346370.23329@stewart.warwick.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-talk] sent mail</title>
<link rev="made" href="mailto:rgh@topikality.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00973.html">Date Prev</a>][<a href="msg00893.html">Date Next</a>][<a href="msg00973.html">Thread Prev</a>][<a href="msg01048.html">Thread Next</a>][<a href="maillist.html#00984">Date Index</a>][<a href="threads.html#00984">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-talk] sent mail</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: Re: [sup-talk] sent mail</li>
<li><em>From</em>: Richard Heycock &lt;<a href="mailto:rgh%40topikality.com">rgh@topikality.com</a>&gt;</li>
<li><em>Date</em>: Thu, 08 Apr 2010 23:27:28 +1000</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>In-reply-to</em>: &lt;<a href="msg00973.html">alpine.DEB.1.10.1004081346370.23329@stewart.warwick.ac.uk</a>&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg01027.html">alpine.DEB.1.10.1004072122250.25589@stewart.warwick.ac.uk</a>&gt;	&lt;<a href="msg01097.html">1270727373-sup-8902@roughage.com.au</a>&gt;	&lt;<a href="msg00973.html">alpine.DEB.1.10.1004081346370.23329@stewart.warwick.ac.uk</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/0.11</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Excerpts from Neil Stewart's message of 2010-04-08 22:54:01 +1000:
&gt; Hi Richard,
&gt; 
&gt; &gt; Not sure if this helps but you really don't want to be using ruby 1.9.0
&gt; &gt; the latest is ruby-1.9.1-p376. If you want to install using Debian
&gt; &gt; packages they are in testing.
&gt; &gt;
&gt; &gt;    apt-get install rubygems1.9.1 ruby1.9.1-dev rdoc1.9.1 irb1.9.1
&gt; &gt;
&gt; &gt; should see you right.
&gt; 
&gt; Thanks for the pointers. I've got the right ruby packages now.
&gt; 
&gt; # dpkg -l | grep ruby
&gt; ii  libreadline-ruby1.9.1                1.9.1.378-1                Readline interface for Ruby 1.9.1
&gt; ii  libruby1.9.1                         1.9.1.378-1                Libraries necessary to run Ruby 1.9.1
&gt; ii  ruby1.9.1                            1.9.1.378-1                Interpreter of object-oriented scripting lan
&gt; ii  ruby1.9.1-dev                        1.9.1.378-1                Header files for compiling extension modules
&gt; ii  rubygems1.9.1                        1.3.5-2                    package management framework for Ruby librar
&gt; 
&gt; &gt; &quot;gem install sup&quot; will put a script in /usr/bin so you should be able to
&gt; &gt; simply type sup. If you have multiple versions of ruby you might have
&gt; &gt; problems but if you invoke it thus: /path/to/ruby /usr/bin/sup you
&gt; &gt; should be right.
&gt; 
&gt; &quot;gem install sup&quot; seems to be failing on ncurses.
&gt; 
&gt; # gem install sup
&gt; Building native extensions.  This could take a while...
&gt; ERROR:  Error installing sup:
&gt;          ERROR: Failed to build gem native extension.
&gt; 
&gt; /usr/bin/ruby1.9.1 extconf.rb
&gt; checking for unistd.h... yes
&gt; checking for ncurses.h... yes
&gt; checking for wmove() in -lncurses... yes
&gt; checking for newscr()... yes
&gt; checking for TABSIZE()... yes
&gt; checking for ESCDELAY()... yes
&gt; checking for keybound()... yes
&gt; checking for curses_version()... yes
&gt; [SNIP]
&gt; checking for new_form() in -lform... yes
&gt; creating Makefile
&gt; 
&gt; make
&gt; Makefile:158: warning: overriding commands for target
&gt; `/var/lib/gems/1.9.1/gems/ncurses-0.9.1/lib'
&gt; Makefile:156: warning: ignoring old commands for target
&gt; `/var/lib/gems/1.9.1/gems/ncurses-0.9.1/lib'
&gt; cc -I. -I/usr/include/ruby-1.9.1/x86_64-linux
&gt; -I/usr/include/ruby-1.9.1/ruby/backward -I/usr/include/ruby-1.9.1 -I.
&gt; -DHAVE_UNISTD_H -DHAVE_NCURSES_H -DHAVE_NEWSCR -DHAVE_TABSIZE
&gt; -DHAVE_ESCDELAY -DHAVE_KEYBOUND -DHAVE_CURSES_VERSION -DHAVE_TIGETSTR
&gt; -DHAVE_GETWIN -DHAVE_PUTWIN -DHAVE_UNGETMOUSE -DHAVE_MOUSEMASK
&gt; -DHAVE_WENCLOSE -DHAVE_MOUSEINTERVAL -DHAVE_WMOUSE_TRAFO -DHAVE_MCPRINT
&gt; -DHAVE_HAS_KEY -DHAVE_DELSCREEN -DHAVE_DEFINE_KEY -DHAVE_KEYOK
&gt; -DHAVE_RESIZETERM -DHAVE_USE_DEFAULT_COLORS -DHAVE_USE_EXTENDED_NAMES
&gt; -DHAVE_WRESIZE -DHAVE_ATTR_ON -DHAVE_ATTR_OFF -DHAVE_ATTR_SET -DHAVE_CHGAT
&gt; -DHAVE_COLOR_SET -DHAVE_FILTER -DHAVE_INTRFLUSH -DHAVE_MVCHGAT
&gt; -DHAVE_MVHLINE -DHAVE_MVVLINE -DHAVE_MVWCHGAT -DHAVE_MVWHLINE
&gt; -DHAVE_MVWVLINE -DHAVE_NOQIFLUSH -DHAVE_PUTP -DHAVE_QIFLUSH -DHAVE_SCR_DUMP
&gt; -DHAVE_SCR_INIT -DHAVE_SCR_RESTORE -DHAVE_SCR_SET -DHAVE_SLK_ATTR
&gt; -DHAVE_SLK_ATTR_SET -DHAVE_SLK_COLOR -DHAVE_TIGETFLAG -DHAVE_TIGETNUM
&gt; -DHAVE_USE_ENV -DHAVE_VIDATTR -DHAVE_WATTR_ON -DHAVE_WATTR_OFF
&gt; -DHAVE_WATTR_SET -DHAVE_WCHGAT -DHAVE_WCOLOR_SET -DHAVE_GETATTRS
&gt; -DHAVE_ASSUME_DEFAULT_COLORS -DHAVE_ATTR_GET -DHAVE_PANEL_H -DHAVE_FORM_H
&gt; -fPIC -fno-strict-aliasing -g -g -O2 -O2 -g -Wall -Wno-parentheses  -fPIC -g
&gt; -o form_wrap.o -c form_wrap.c
&gt; form_wrap.c: In function 'rbncurs_m_new_form':
&gt; form_wrap.c:395: error: 'struct RArray' has no member named 'len'
&gt; form_wrap.c: In function 'rbncurs_c_set_field_type':
&gt; form_wrap.c:619: error: 'struct RArray' has no member named 'len'
&gt; form_wrap.c: In function 'rbncurs_c_set_form_fields':
&gt; form_wrap.c:778: error: 'struct RArray' has no member named 'len'
&gt; form_wrap.c: In function 'make_arg':
&gt; form_wrap.c:1126: error: 'struct RArray' has no member named 'len'
&gt; make: *** [form_wrap.o] Error 1
&gt; 
&gt; 
&gt; Gem files will remain installed in /var/lib/gems/1.9.1/gems/ncurses-0.9.1
&gt; for inspection.
&gt; Results logged to /var/lib/gems/1.9.1/gems/ncurses-0.9.1/gem_make.out
&gt; 
&gt; 
&gt; I get pretty much identical output from &quot;gem install ncurses&quot;, so I suspect
&gt; the problem is not even a sup issue. Am I doing something terribly wrong?
&gt; All comments most welcome.

You are right it's not a sup issue. Ruby ncurses hasn't been ported to
1.9 so I just used ncursesw which seems to work quite well. Since you
are using gem to install sup you will need to untar the gem file modify
the metadata, tar it all up and reinstall. Something along the lines of:

cd /var/lib/gems/1.9.1/gems/cache/
mkdir tmp; cd tmp
tar xf ../sup-0.11.gem (ignore any timestamp errors)
vi metadata (make sure you use vim which will deal with the compression)
tar cf ../sup-0.11.gem .
cd ..
gem install sup-0.11.gem
rm -r tmp (assuming it works)

If you have problems working out which line to change in the metadata
you could unzip it and apply the following patch:

--- metadata.old        2010-04-08 23:10:27.363603950 +1000
+++ metadata.new        2010-04-08 23:11:09.479559396 +1000
@@ -32,7 +32,7 @@
   type: :runtime
   version_requirements: *id001
 - !ruby/object:Gem::Dependency 
-  name: ncurses
+  name: ncursesw
   prerelease: false
   requirement: &amp;id002 !ruby/object:Gem::Requirement 
     requirements: 

And that should do you.

Or you could download a modified gem from <a  rel="nofollow" href="http://stuff.roughage.com.au/sup-0.11.gem">http://stuff.roughage.com.au/sup-0.11.gem</a>.
That gem was built from git and works (on my machine!).

William, is there any reason you are using ncurses and not ncursesw?

rgh

&gt; Best,
&gt; Neil.
&gt; 
-- 
Richard Heycock

<a  rel="nofollow" href="http://topikality.com">http://topikality.com</a>

+61 (0) 410 646 369
[e]:  rgh@topikality.com
[im]: rgh@topikality.com
_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01009" href="msg01009.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Rich Lane &lt;rlane@club.cc.cmu.edu&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01027" href="msg01027.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Neil Stewart &lt;neil.stewart@warwick.ac.uk&gt;</li></ul></li>
<li><strong><a name="01097" href="msg01097.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Richard Heycock &lt;rgh@topikality.com&gt;</li></ul></li>
<li><strong><a name="00973" href="msg00973.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Neil Stewart &lt;neil.stewart@warwick.ac.uk&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00973.html">Re: [sup-talk] sent mail</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00893.html">Re: [sup-talk] sent mail</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00973.html">Re: [sup-talk] sent mail</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01048.html">Re: [sup-talk] sent mail</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00984"><strong>Date</strong></a></li>
<li><a href="threads.html#00984"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
