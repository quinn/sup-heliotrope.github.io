<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;talk] Crash while in thread&#45;view&#45;mode -->
<!--X-From-R13: Pra Unznev <otnznev.sbffNtznvy.pbz> -->
<!--X-Date: Tue, 6 Oct 2009 08:53:39 &#45;0700 (PDT) -->
<!--X-Message-Id: 1254844166&#45;sup&#45;1028@ben&#45;laptop -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1254844050&#45;sup&#45;4148@ben&#45;laptop -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-talk] Crash while in thread-view-mode</title>
<link rev="made" href="mailto:bgamari.foss@gmail.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg01522.html">Date Prev</a>][<a href="msg01688.html">Date Next</a>][<a href="msg01688.html">Thread Prev</a>][<a href="msg01512.html">Thread Next</a>][<a href="maillist.html#01800">Date Index</a>][<a href="threads.html#01800">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-talk] Crash while in thread-view-mode</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: Re: [sup-talk] Crash while in thread-view-mode</li>
<li><em>From</em>: Ben Gamari &lt;<a href="mailto:bgamari.foss%40gmail.com">bgamari.foss@gmail.com</a>&gt;</li>
<li><em>Date</em>: Tue, 06 Oct 2009 11:53:18 -0400</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a>; dkim=neutral (body hash did not verify) header.i=@gmail.com</li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;	h=domainkey-signature:received:received:content-type:subject:from:to	:in-reply-to:references:date:message-id:user-agent	:content-transfer-encoding;	bh=6mebinrif0S0/gwKNiv9pGopbOFYfOcN6/rduPA4Q+o=;	b=E3eJgNzjngkE7voD0QDIryN39rp0N2Cmxm7yaF0QLGIG3cegebj4FIUWGX+5f+Egfn	wiGqM4vq8yAwOd7cSAk0iNTXGE+GamyZUagneeWEBXKPrgrEXOUcedPTSYYAJHOH6CPN	lDfsnArnyCsho33MSZZYvjlpzsbH9sRGOkrSk=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;	h=content-type:subject:from:to:in-reply-to:references:date:message-id	:user-agent:content-transfer-encoding;	b=mDXANDi0VHl+JVjI8h0aDEQ11saQACcApRfWsEssaB3F+s4hnPU0kqSG/pDjI+hQG/	Ov+ylDOtPaXC8S7b3c8cAUa7QA6BVkAjfT5XipFKe/lXCtr0oc7JiMg+ScIxTgJOI7s8	ySYUNtf3zshy9qRp788ExIUYrDiGi5Cle90dk=</li>
<li><em>In-reply-to</em>: &lt;1254844050-sup-4148@ben-laptop&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;1254844050-sup-4148@ben-laptop&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/git</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Well, it seems like whatever caused the crash earlier did something to
my index. Now any attempt to open a thread-index-mode of my LKML label
(which I was viewing in the earlier crash) causes the client to
immediately crash.

Do any of the sup utilities have any sort of index sanity checker to
find potential causes of this sort of issue? Thanks,

- Ben


--- RuntimeError from thread: load threads for thread-index-mode
wrong id called on nil
/opt/exp/sup/lib/sup.rb:17:in `id'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:225:in `update'
/usr/lib64/ruby/1.8/rubygems/custom_require.rb:31:in `sort_by'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:225:in `each'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:225:in `sort_by'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:225:in `update'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:223:in `synchronize'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:223:in `update'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:628:in `__unprotected_load_n_threads'
/opt/exp/sup/lib/sup/thread.rb:334:in `load_n_threads'
/opt/exp/sup/lib/sup/xapian_index.rb:117:in `each_id_by_date'
/opt/exp/sup/lib/sup/xapian_index.rb:110:in `each_id'
/opt/exp/sup/lib/sup/xapian_index.rb:110:in `each'
/opt/exp/sup/lib/sup/xapian_index.rb:110:in `each_id'
/opt/exp/sup/lib/sup/xapian_index.rb:117:in `each_id_by_date'
/opt/exp/sup/lib/sup/thread.rb:328:in `load_n_threads'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:625:in `__unprotected_load_n_threads'
(eval):12:in `load_n_threads'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:609:in `load_n_threads_background'
/opt/exp/sup/lib/sup.rb:77:in `reporting_thread'
/opt/exp/sup/lib/sup.rb:75:in `initialize'
/opt/exp/sup/lib/sup.rb:75:in `new'
/opt/exp/sup/lib/sup.rb:75:in `reporting_thread'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:608:in `load_n_threads_background'
/opt/exp/sup/lib/sup/modes/thread-index-mode.rb:679:in `__unprotected_load_threads'
(eval):12:in `load_threads'
/opt/exp/sup/lib/sup/modes/label-search-results-mode.rb:33:in `spawn_nicely'
/opt/exp/sup/lib/sup/modes/label-list-mode.rb:103:in `select_label'
/opt/exp/sup/lib/sup/mode.rb:51:in `send'
/opt/exp/sup/lib/sup/mode.rb:51:in `handle_input'
/opt/exp/sup/lib/sup/buffer.rb:267:in `handle_input'
/usr/bin/sup:239


Excerpts from Ben Gamari's message of Tue Oct 06 11:47:34 -0400 2009:
&gt; I just had sup crash on me while reading a thread. Not really sure what
&gt; to make of the backtrace. Looks like it failed during polling but who
&gt; knows why. Thanks,
&gt; 
&gt; - Ben
&gt; 
_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01512" href="msg01512.html">Re: [sup-talk] Crash while in thread-view-mode</a></strong>
<ul><li><em>From:</em> Ben Gamari &lt;bgamari.foss@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01688" href="msg01688.html">[sup-talk] Crash while in thread-view-mode</a></strong>
<ul><li><em>From:</em> Ben Gamari &lt;bgamari.foss@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg01522.html">Re: [sup-talk] i18n?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01688.html">[sup-talk] Crash while in thread-view-mode</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg01688.html">[sup-talk] Crash while in thread-view-mode</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01512.html">Re: [sup-talk] Crash while in thread-view-mode</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01800"><strong>Date</strong></a></li>
<li><a href="threads.html#01800"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
