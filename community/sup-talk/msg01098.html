<!-- MHonArc v2.6.18 -->
<!--X-Subject: [sup&#45;talk] Problems with encodings and Ruby 1.9 -->
<!--X-From-R13: Wfenry Vreenvm <vfenNureenvm.bet> -->
<!--X-Date: Tue, 30 Mar 2010 07:31:52 &#45;0700 (PDT) -->
<!--X-Message-Id: 1269957778&#45;sup&#45;2533@duck -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[sup-talk] Problems with encodings and Ruby 1.9</title>
<link rev="made" href="mailto:isra@herraiz.org">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00964.html">Date Prev</a>][<a href="msg00746.html">Date Next</a>][<a href="msg00953.html">Thread Prev</a>][<a href="msg00746.html">Thread Next</a>][<a href="maillist.html#01098">Date Index</a>][<a href="threads.html#01098">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[sup-talk] Problems with encodings and Ruby 1.9</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: [sup-talk] Problems with encodings and Ruby 1.9</li>
<li><em>From</em>: Israel Herraiz &lt;<a href="mailto:isra%40herraiz.org">isra@herraiz.org</a>&gt;</li>
<li><em>Date</em>: Tue, 30 Mar 2010 16:19:35 +0200</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a>; dkim=neutral (body hash did not verify) header.i=@gmail.com</li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=gamma;	h=domainkey-signature:received:received:sender:content-type:from:to	:subject:date:message-id:user-agent:content-transfer-encoding;	bh=GKtv0a2Atq+XOslhMNYJG2WxH/SivRvODp7KVEc6ZL4=;	b=HMQDoiVqACAS377SLLIPB0J+VGXU7QqGEUFm4zrbcz5NbG+66FVkFCyJtGUyq54kDN	XHdygqw3kwNHCZu+Yo0jJKfYCK3dIzAyLbr3dWHYnw6DYJ5V1Iij+nGmsqmwxvwT0r3X	1h+p7neYGz9IL6dqFzVQnAPreqHfMndGxFJLw=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws; d=gmail.com; s=gamma;	h=sender:content-type:from:to:subject:date:message-id:user-agent	:content-transfer-encoding;	b=pMIm6CArXStQSIziG6STzrymnqjPK27tvMl+kSqUa84Yg6PGPdmoZE4E+C/03HxKKY	DLcTZJjtuATk8Q/FatFYFwA82zVW2crVeIWFw5GoxYSGmRpg9AMN8jVtE3AE6ry8/ECc	2zeAXykvWhujslfUSXkOGkvJtLMiw0Nb277sY=</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/git</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi all,

I am trying out Sup with Ruby 1.9 in ArchLinux, and I am facing some
crashes with some messages written in different encodings. Those
messages were correctly shown with Ruby 1.8.

The problem is that when there are messages with some different
encoding. In particular, whenever I get a message with ASCII_8BIT, Sup
crashes with the following message:

  incompatible character encodings: UTF-8 and ASCII-8BIT

This both happens in Sup next and in Sup 0.11; I have tried to fix it,
touching the check method in utils.rb, without success. Well, actually
with partial success, because if at line 719 I change the else
condition forcing the charset to be utf-8, the message will be shown,
although with wide characters not properly displayed.

In a message in sup-devel, Rich pointed out that an ASCII_8BIT string
means that there is a bug in Sup [1]. I am willing to debug this, but
I have not found yet where the problem is. I can provide a copy of the
messages causing this if someone else wants to reproduce this
behavior.

Any hint about how to fix this?

Cheers,
Israel
_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00964.html">Re: [sup-talk] printing emails (but not attachments)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00746.html">[sup-talk] Still having wide character issues on OS X</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00953.html">Re: [sup-talk] Search for message by size</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00746.html">[sup-talk] Still having wide character issues on OS X</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01098"><strong>Date</strong></a></li>
<li><a href="threads.html#01098"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
