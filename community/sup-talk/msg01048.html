<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;talk] sent mail -->
<!--X-From-R13: @rvy Egrjneg <arvy.fgrjnegNjnejvpx.np.hx> -->
<!--X-Date: Fri, 9 Apr 2010 14:38:43 &#45;0700 (PDT) -->
<!--X-Message-Id: alpine.DEB.1.10.1004092232120.4476@stewart.warwick.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: alpine.DEB.1.10.1004072122250.25589@stewart.warwick.ac.uk -->
<!--X-Reference: 1270727373&#45;sup&#45;8902@roughage.com.au -->
<!--X-Reference: alpine.DEB.1.10.1004081346370.23329@stewart.warwick.ac.uk -->
<!--X-Reference: 1270731588&#45;sup&#45;6397@roughage.com.au -->
<!--X-Reference: alpine.DEB.1.10.1004092231370.4476@stewart.warwick.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-talk] sent mail</title>
<link rev="made" href="mailto:neil.stewart@warwick.ac.uk">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00775.html">Date Prev</a>][<a href="msg01009.html">Date Next</a>][<a href="msg00984.html">Thread Prev</a>][<a href="msg01009.html">Thread Next</a>][<a href="maillist.html#01048">Date Index</a>][<a href="threads.html#01048">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-talk] sent mail</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: Re: [sup-talk] sent mail</li>
<li><em>From</em>: Neil Stewart &lt;<a href="mailto:neil.stewart%40warwick.ac.uk">neil.stewart@warwick.ac.uk</a>&gt;</li>
<li><em>Date</em>: Fri, 9 Apr 2010 22:37:28 +0100 (BST)</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>In-reply-to</em>: &lt;alpine.DEB.1.10.1004092231370.4476@stewart.warwick.ac.uk&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg01027.html">alpine.DEB.1.10.1004072122250.25589@stewart.warwick.ac.uk</a>&gt;	&lt;<a href="msg01097.html">1270727373-sup-8902@roughage.com.au</a>&gt;	&lt;<a href="msg00973.html">alpine.DEB.1.10.1004081346370.23329@stewart.warwick.ac.uk</a>&gt;	&lt;<a href="msg00984.html">1270731588-sup-6397@roughage.com.au</a>&gt;	&lt;alpine.DEB.1.10.1004092231370.4476@stewart.warwick.ac.uk&gt;</li>
<li><em>Reply-to</em>: Neil Stewart &lt;<a href="mailto:neil.stewart%40warwick.ac.uk">neil.stewart@warwick.ac.uk</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Alpine 1.10 (DEB 962 2008-03-14)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Just a further note on the resolultion of the ncurses issue.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
&quot;gem install sup&quot; seems to be failing on ncurses.

# gem install sup
Building native extensions.  This could take a while...
ERROR:  Error installing sup:
         ERROR: Failed to build gem native extension.

/usr/bin/ruby1.9.1 extconf.rb
checking for unistd.h... yes
checking for ncurses.h... yes
checking for wmove() in -lncurses... yes
checking for newscr()... yes
checking for TABSIZE()... yes
checking for ESCDELAY()... yes
checking for keybound()... yes
checking for curses_version()... yes
[SNIP]
checking for new_form() in -lform... yes
creating Makefile

make
Makefile:158: warning: overriding commands for target
`/var/lib/gems/1.9.1/gems/ncurses-0.9.1/lib'
Makefile:156: warning: ignoring old commands for target
`/var/lib/gems/1.9.1/gems/ncurses-0.9.1/lib'
cc -I. -I/usr/include/ruby-1.9.1/x86_64-linux
-I/usr/include/ruby-1.9.1/ruby/backward -I/usr/include/ruby-1.9.1 -I.
-DHAVE_UNISTD_H -DHAVE_NCURSES_H -DHAVE_NEWSCR -DHAVE_TABSIZE
-DHAVE_ESCDELAY -DHAVE_KEYBOUND -DHAVE_CURSES_VERSION -DHAVE_TIGETSTR
-DHAVE_GETWIN -DHAVE_PUTWIN -DHAVE_UNGETMOUSE -DHAVE_MOUSEMASK
-DHAVE_WENCLOSE -DHAVE_MOUSEINTERVAL -DHAVE_WMOUSE_TRAFO -DHAVE_MCPRINT
-DHAVE_HAS_KEY -DHAVE_DELSCREEN -DHAVE_DEFINE_KEY -DHAVE_KEYOK
-DHAVE_RESIZETERM -DHAVE_USE_DEFAULT_COLORS -DHAVE_USE_EXTENDED_NAMES
-DHAVE_WRESIZE -DHAVE_ATTR_ON -DHAVE_ATTR_OFF -DHAVE_ATTR_SET -DHAVE_CHGAT
-DHAVE_COLOR_SET -DHAVE_FILTER -DHAVE_INTRFLUSH -DHAVE_MVCHGAT
-DHAVE_MVHLINE -DHAVE_MVVLINE -DHAVE_MVWCHGAT -DHAVE_MVWHLINE
-DHAVE_MVWVLINE -DHAVE_NOQIFLUSH -DHAVE_PUTP -DHAVE_QIFLUSH -DHAVE_SCR_DUMP
-DHAVE_SCR_INIT -DHAVE_SCR_RESTORE -DHAVE_SCR_SET -DHAVE_SLK_ATTR
-DHAVE_SLK_ATTR_SET -DHAVE_SLK_COLOR -DHAVE_TIGETFLAG -DHAVE_TIGETNUM
-DHAVE_USE_ENV -DHAVE_VIDATTR -DHAVE_WATTR_ON -DHAVE_WATTR_OFF
-DHAVE_WATTR_SET -DHAVE_WCHGAT -DHAVE_WCOLOR_SET -DHAVE_GETATTRS
-DHAVE_ASSUME_DEFAULT_COLORS -DHAVE_ATTR_GET -DHAVE_PANEL_H -DHAVE_FORM_H
-fPIC -fno-strict-aliasing -g -g -O2 -O2 -g -Wall -Wno-parentheses  -fPIC -g
-o form_wrap.o -c form_wrap.c
form_wrap.c: In function 'rbncurs_m_new_form':
form_wrap.c:395: error: 'struct RArray' has no member named 'len'
form_wrap.c: In function 'rbncurs_c_set_field_type':
form_wrap.c:619: error: 'struct RArray' has no member named 'len'
form_wrap.c: In function 'rbncurs_c_set_form_fields':
form_wrap.c:778: error: 'struct RArray' has no member named 'len'
form_wrap.c: In function 'make_arg':
form_wrap.c:1126: error: 'struct RArray' has no member named 'len'
make: *** [form_wrap.o] Error 1


Gem files will remain installed in /var/lib/gems/1.9.1/gems/ncurses-0.9.1
for inspection.
Results logged to /var/lib/gems/1.9.1/gems/ncurses-0.9.1/gem_make.out


I get pretty much identical output from &quot;gem install ncurses&quot;, so I suspect
the problem is not even a sup issue. Am I doing something terribly wrong?
All comments most welcome.
</pre></blockquote><pre style="margin: 0em;">

You are right it's not a sup issue. Ruby ncurses hasn't been ported to
1.9 so I just used ncursesw which seems to work quite well. Since you
are using gem to install sup you will need to untar the gem file modify
the metadata, tar it all up and reinstall. Something along the lines of:

cd /var/lib/gems/1.9.1/gems/cache/
mkdir tmp; cd tmp
tar xf ../sup-0.11.gem (ignore any timestamp errors)
vi metadata (make sure you use vim which will deal with the compression)
tar cf ../sup-0.11.gem .
cd ..
gem install sup-0.11.gem
rm -r tmp (assuming it works)

If you have problems working out which line to change in the metadata
you could unzip it and apply the following patch:

--- metadata.old        2010-04-08 23:10:27.363603950 +1000
+++ metadata.new        2010-04-08 23:11:09.479559396 +1000
@@ -32,7 +32,7 @@
  type: :runtime
  version_requirements: *id001
- !ruby/object:Gem::Dependency
-  name: ncurses
+  name: ncursesw
  prerelease: false
  requirement: &amp;id002 !ruby/object:Gem::Requirement
    requirements:

And that should do you.

Or you could download a modified gem from <a  rel="nofollow" href="http://stuff.roughage.com.au/sup-0.11.gem">http://stuff.roughage.com.au/sup-0.11.gem</a>.
That gem was built from git and works (on my machine!).

William, is there any reason you are using ncurses and not ncursesw?
</pre></blockquote></blockquote><pre style="margin: 0em;">

I'm making my sup gem using ruby1.9.1 and the latest code from gitorious.
The code compiles a gem without complaint, but the gem doesn't install and
gives the above error. When the Rakefile is updated to refer to ncursesw not
ncurses, the gem compiles, installs, and runs without a problem.

Best,
Neil.



_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01027" href="msg01027.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Neil Stewart &lt;neil.stewart@warwick.ac.uk&gt;</li></ul></li>
<li><strong><a name="01097" href="msg01097.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Richard Heycock &lt;rgh@topikality.com&gt;</li></ul></li>
<li><strong><a name="00973" href="msg00973.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Neil Stewart &lt;neil.stewart@warwick.ac.uk&gt;</li></ul></li>
<li><strong><a name="00984" href="msg00984.html">Re: [sup-talk] sent mail</a></strong>
<ul><li><em>From:</em> Richard Heycock &lt;rgh@topikality.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00775.html">Re: [sup-talk] killed threads not searchable?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg01009.html">Re: [sup-talk] sent mail</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00984.html">Re: [sup-talk] sent mail</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01009.html">Re: [sup-talk] sent mail</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#01048"><strong>Date</strong></a></li>
<li><a href="threads.html#01048"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
