<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [sup&#45;talk] hook with external file ref -->
<!--X-From-R13: Buvyvccr ZrQninyvre <fhccbegNcyrpninyvre.pbz> -->
<!--X-Date: Thu, 10 Mar 2011 06:24:06 &#45;0800 (PST) -->
<!--X-Message-Id: 1299766157&#45;sup&#45;3090@plc.intranet.plecavalier.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1299158755&#45;sup&#45;5116@plc.intranet.plecavalier.com -->
<!--X-Reference: 1299173352&#45;sup&#45;4428@nyx.local -->
<!--X-Reference: 1299179513&#45;sup&#45;1090@plc.intranet.plecavalier.com -->
<!--X-Reference: 1299247526&#45;sup&#45;7848@plc.intranet.plecavalier.com -->
<!--X-Reference: 1299618530&#45;sup&#45;9754@nyx.local -->
<!--X-Reference: 1299636520&#45;sup&#45;7694@plc.intranet.plecavalier.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [sup-talk] hook with external file ref</title>
<link rev="made" href="mailto:support@plecavalier.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00689.html">Date Prev</a>][<a href="msg00426.html">Date Next</a>][<a href="msg00689.html">Thread Prev</a>][<a href="msg00647.html">Thread Next</a>][<a href="maillist.html#00576">Date Index</a>][<a href="threads.html#00576">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [sup-talk] hook with external file ref</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: David J. Hamilton &lt;<a href="mailto:groups%40hjdivad.com">groups@hjdivad.com</a>&gt;, sup-talk &lt;<a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a>&gt;</li>
<li><em>Subject</em>: Re: [sup-talk] hook with external file ref</li>
<li><em>From</em>: Philippe LeCavalier &lt;<a href="mailto:support%40plecavalier.com">support@plecavalier.com</a>&gt;</li>
<li><em>Date</em>: Thu, 10 Mar 2011 09:13:04 -0500</li>
<li><em>Authentication-results</em>: mx.google.com; spf=pass (google.com: domain of <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a> designates 205.234.109.19 as permitted sender) smtp.mail=<a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>Delivered-to</em>: <a href="mailto:eg%40gaute.vetsj.com">eg@gaute.vetsj.com</a></li>
<li><em>Delivered-to</em>: <a href="mailto:sup-talk%40rubyforge.org">sup-talk@rubyforge.org</a></li>
<li><em>In-reply-to</em>: &lt;<a href="msg00689.html">1299636520-sup-7694@plc.intranet.plecavalier.com</a>&gt;</li>
<li><em>List-archive</em>: &lt;<a href="http://rubyforge.org/pipermail/sup-talk">http://rubyforge.org/pipermail/sup-talk</a>&gt;</li>
<li><em>List-help</em>: &lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=help">mailto:sup-talk-request@rubyforge.org?subject=help</a>&gt;</li>
<li><em>List-id</em>: User &amp; developer discussion of Sup &lt;sup-talk.rubyforge.org&gt;</li>
<li><em>List-post</em>: &lt;<a href="mailto:sup-talk@rubyforge.org">mailto:sup-talk@rubyforge.org</a>&gt;</li>
<li><em>List-subscribe</em>: &lt;<a href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=subscribe">mailto:sup-talk-request@rubyforge.org?subject=subscribe</a>&gt;</li>
<li><em>List-unsubscribe</em>: &lt;<a href="http://rubyforge.org/mailman/options/sup-talk">http://rubyforge.org/mailman/options/sup-talk</a>&gt;,	&lt;<a href="mailto:sup-talk-request@rubyforge.org?subject=unsubscribe">mailto:sup-talk-request@rubyforge.org?subject=unsubscribe</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg00388.html">1299158755-sup-5116@plc.intranet.plecavalier.com</a>&gt;	&lt;1299173352-sup-4428@nyx.local&gt;	&lt;<a href="msg00639.html">1299179513-sup-1090@plc.intranet.plecavalier.com</a>&gt;	&lt;<a href="msg00462.html">1299247526-sup-7848@plc.intranet.plecavalier.com</a>&gt;	&lt;1299618530-sup-9754@nyx.local&gt;	&lt;<a href="msg00689.html">1299636520-sup-7694@plc.intranet.plecavalier.com</a>&gt;</li>
<li><em>Sender</em>: <a href="mailto:sup-talk-bounces%40rubyforge.org">sup-talk-bounces@rubyforge.org</a></li>
<li><em>User-agent</em>: Sup/0.12.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Excerpts from Philippe LeCavalier's message of Tue Mar 08 21:13:26 -0500 2011:
&gt; Hi David.
&gt; Excerpts from David J. Hamilton's message of Tue Mar 08 16:16:00 -0500 2011:
&gt; &gt; Hi Philippe,
&gt; &gt; 
&gt; &gt; Excerpts from Philippe LeCavalier's message of Fri Mar 04 06:06:17 -0800 2011:
&gt; &gt; &gt; Hi David.
&gt; &gt; &gt; I'm getting &quot;undetermined quoted string&quot; with the above code. Any ideas?
&gt; &gt; 
&gt; &gt; Sorry for the late reply.  I don't see what in the above code would give you
&gt; &gt; that error.
&gt; It's quite possible it's something unrelated to that hook.
Not certain what was going on there. I opened sup with debug to try and
catch the so called &quot;undetermined string&quot; and now I'm not even getting
the error. Strange thing is, I was seeing that over a long period of
time ie a week or more...anyway. Guess I'll drop that.
&gt; &gt; Could you please post your complete before-add-message.rb file?
&gt; Since I have yet to settle on a &quot;style&quot; of code for this hook I'm only
&gt; playing around with different options. As such, I only apply them 1 at a
&gt; time. At the moment I only have your example in there.
&gt; &gt; Your addressfile is just a list of domains right?  Something like:
&gt; &gt; 
&gt; &gt;   gmail.com
&gt; &gt;   somewhereelse.net
&gt; &gt;   example.org
&gt; Yup. Exactly.
&gt; &gt; 
&gt; &gt; One more thing: the code I originally posted does contain an error: you want to
&gt; &gt; use /#{pattern.chomp}/ rather than /#{pattern}/.  So, for example, if your
&gt; &gt; addressfile was in /tmp/addressfile you would have:
&gt; &gt; 
&gt; &gt;   patterns = File.readlines &quot;/tmp/addressfile&quot;
&gt; &gt;   patterns.each do |pattern|
&gt; &gt;     if message.from.email =~ /#{pattern.chomp}/
&gt; &gt;       message.add_label :somelabel
&gt; &gt;     end
&gt; &gt;   end
&gt; I'll try the above. Perhaps that will &quot;settle&quot; things. Back in a bit
&gt; once I have a chance to test that.
&gt; 
&gt; Thanks again David.
Now that I've got no errors I can focus on the hook above. After adding
chomp to the code I now get nothing at all. The log shows the hook is
being read but nothing happens. No label is added and I've confirm for
certain there should be. So no error, but no action ;-) Any suggestions?

-- 
Thanks,
Phil
_______________________________________________
sup-talk mailing list
sup-talk@rubyforge.org
<a  rel="nofollow" href="http://rubyforge.org/mailman/listinfo/sup-talk">http://rubyforge.org/mailman/listinfo/sup-talk</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00388" href="msg00388.html">[sup-talk] hook with external file ref</a></strong>
<ul><li><em>From:</em> Philippe LeCavalier &lt;support@plecavalier.com&gt;</li></ul></li>
<li><strong><a name="00658" href="msg00658.html">Re: [sup-talk] hook with external file ref</a></strong>
<ul><li><em>From:</em> David J. Hamilton &lt;groups@hjdivad.com&gt;</li></ul></li>
<li><strong><a name="00639" href="msg00639.html">Re: [sup-talk] hook with external file ref</a></strong>
<ul><li><em>From:</em> Philippe LeCavalier &lt;support@plecavalier.com&gt;</li></ul></li>
<li><strong><a name="00462" href="msg00462.html">Re: [sup-talk] hook with external file ref</a></strong>
<ul><li><em>From:</em> Philippe LeCavalier &lt;support@plecavalier.com&gt;</li></ul></li>
<li><strong><a name="00689" href="msg00689.html">Re: [sup-talk] hook with external file ref</a></strong>
<ul><li><em>From:</em> Philippe LeCavalier &lt;support@plecavalier.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00689.html">Re: [sup-talk] hook with external file ref</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00426.html">[sup-talk] error on new messages</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00689.html">Re: [sup-talk] hook with external file ref</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00647.html">[sup-talk] threading and blackberrys</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00576"><strong>Date</strong></a></li>
<li><a href="threads.html#00576"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
